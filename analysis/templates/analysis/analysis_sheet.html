{% extends 'analysis/base.html' %}
{% load static %}
{% block content %}

  <div class="container">

    <table class="table table-bordered">
      <thead>
        <tr>
          <th scope="col">Sample</th>
          <th scope="col">Referral</th>
          <th scope="col">Worksheet</th>
          <th scope="col">Run ID</th>
          <th scope="col">Status</th>
        </tr>
      </thead>
      <tbody>
        
        <tr>
          <td>Bob</td>
          <td>Colorectal</td>
          <td>21-12345</td>
          <td>210418_NB12142_212_ADSRV45G4SD</td>
          <td>Second IGV check</td>
        </tr>
  
      </tbody>
    </table>
  </div>

  <br>

  <div class="container-fluid">

    <ul class="nav nav-tabs nav-justified">
      <li class="nav-item">
        <a class="nav-link section-button active" href="#section1" data-target="section1">Patient details</a>
      </li>
      <li class="nav-item">
        <a class="nav-link section-button" href="#section2" data-target="section2">Depth</a>
      </li>
      <li class="nav-item">
        <a class="nav-link section-button" href="#section3" data-target="section3">Variant calls</a>
      </li>
      <li class="nav-item">
        <a class="nav-link section-button" href="#section4" data-target="section4">Report</a>
      </li>
    </ul>
  </div>
  <br>


  <!-- load in each section from template -->
  <div class="container" id="section1">{% include 'analysis/analysis-1.html' %}</div>
  <div class="container-fluid" id="section2">{% include 'analysis/analysis-2.html' %}</div>
  <div class="container-fluid" id="section3">{% include 'analysis/analysis-3.html' %}</div>
  <div class="container" id="section4">{% include 'analysis/analysis-4.html' %}</div>



<!--------------------------------------------------------------------------------------- 
    Javascript
---------------------------------------------------------------------------------------->
<script>

    // function to clear all sections
    function clear_sections(sections) {
        var i;
        for (i=0; i<sections.length; i++) {
            $(sections[i]).hide();
        };
    };


    // function to show specific section
    function show_section(target, sections) {
        // clear all sections content
        clear_sections(sections);
        // get button for section
        for (i=0; i<$('.section-button').length; i++) {
            var temp = '#' + $('.section-button')[i].dataset.target;
            if ( target == temp ) {
                var section_button = $('.section-button')[i];
            };
        };
        // clear active class from all, then add to current button
        $('.section-button').removeClass('active');
        $(section_button).addClass('active');
        // add section content
        $(target).fadeIn(200);
    };


    // get a list of section buttons
    var i; var sections_list = [];
    for (i=0; i<$('.section-button').length; i++) {
        sections_list.push('#' + $('.section-button')[i].dataset.target);
    };


    // page loadup - load section after hash otherwise load overview
    clear_sections(sections_list);
    if ( sections_list.includes(window.location.hash)) {
        show_section(window.location.hash, sections_list);
    } else {
        $("#section1").fadeIn(200)
    };


    // handler for section button click
    $('.section-button').click(function() {
        var target = '#' + $(this).data('target');
        show_section(target, sections_list);
    });

</script>



{% endblock %}