{% load custom_tags %}
{% load crispy_forms_tags %}

<h5>Checks summary</h5>
<table class="table table-sm table-hover">
  <thead>
    <tr>
      <th class="col-1">Check</th>
      <th class="col-3">Full classification?</th>
      <th class="col-4">Class</th>
      <th class="col-4">User</th>
    </tr>
  </thead>
  <tbody>
  {% for c in classification_info.all_checks %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>{{ c.full_classification }}</td>
      <td>{{ c.get_final_class_display }} ({{ c.final_score }})</td>
      <td>{{ c.user }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
<br>
<br>


{% if classification_info.classification_obj.get_status != "Complete" %}
  {% if not classification_info.current_check.final_class %}
  <div class="alert alert-warning">
    Please complete the classification before submitting
  </div>

  {% else %}
  <div class="card-body bg-light">
    <h5>Finalise check</h5>
    {% crispy forms.finalise_form %}
    </div>
  {% endif %}

{% else %}
  <h5>Final classification</h5>
  <div class="row">
    <div class="col-6">
      <button class="btn btn-block btn-lg btn-disabled btn-{{ classification_info.current_check.get_final_class_display|colour_by_class }}" type="button">
        <b>{{ classification_info.current_check.get_final_class_display }}</b>
        &nbsp;<span class="badge badge-light">{{ classification_info.current_check.final_score }}</span>
      </button>
    </div>
  </div>
  <br>
  <br>

  <div class="alert alert-warning">
    <h5>Analysis complete!</h5>
    <p>
      Analysis for this variant has been completed.
      <a href="" data-toggle="modal" data-target="#">Click here to reopen</a>
    </p>
  </div>

{% endif %}

